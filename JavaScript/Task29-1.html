<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>任务二十九：表单（一）单个表单项的检验</title>
	<style>
		* {
			padding: 0;
			margin: 0;
		}
		#outer {
			margin: 15px;
		}

		#text {
			width: 200px;
			height: 22px;
			margin: 0 15px;
			border: 1px solid #bbb;
			border-radius: 3px;
		}
		#check {
			padding: 6px;
			background-color: #2f79ba;
			border-width: 0;
			color: #fff;
			border-radius: 5px;
		}

		#des {
			color: #bbb;
			margin: 5px 0 0 50px;
		}
	</style>
</head>
<body>
	<!-- 校验规则：
	1.字符数为4~16位
	2.每个英文字母、数字、英文符号长度为1
	3.每个汉字，中文符号长度为2 -->
	<div id="outer">
		<label for="text">名称</label>
		<input type="text" id="text">
		<button id="check">验证</button>
		<div id="des">必填，长度为4~16个字符</div>
	</div>
	<script>
		var text = document.getElementById('text'),
			des = document.getElementById('des'),
			check = document.getElementById('check');
		
		// 校验
		check.onclick = function() {
			var str = text.value;
			
			if (Getlength(str) == 0) {
				des.innerHTML = '姓名不能为空';
				text.style.borderColor = '#dd0010';
				des.style.color = '#dd0010';
			} else if (Getlength(str) >= 4 && Getlength(str) <= 16) {
				des.innerHTML = '名称格式正确';
				text.style.borderColor = '#60ba48';
				des.style.color = '#60ba48';
			} else {
				des.innerHTML = '请输入长度为4~16位字符';
				text.style.borderColor = '#dd0010';
				des.style.color = '#dd0010';
			}
		}

		function Getlength(str) {
			var length = 0;
			for (var i = 0, len = str.length; i < len; i++) {
				var code = str.charCodeAt(i);
				if (code >= 0 && code <=128) {
					length += 1;
				} else {
					length += 2;
				}
			}
			return length;
		}
	</script>
</body>
</html>